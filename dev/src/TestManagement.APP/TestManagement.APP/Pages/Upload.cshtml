@page
@model UploadModel
@{
    ViewData["Title"] = "ファイルアップロード";
}

<div class="container">
        <div style="padding:24px; max-width:720px; margin:0 auto;">
            @if (!Model.ModelState.IsValid)
            {
                <div style="color:#e74c3c; margin-bottom:12px;">
                    @foreach (var err in Model.ModelState.Values.SelectMany(v => v.Errors))
                    {
                        <div>@err.ErrorMessage</div>
                    }
                </div>
            }
            <form method="post" enctype="multipart/form-data">
                <div class="block">
                    <div class="block-title">テストレベルを選択</div>
                    <div style="margin-bottom:20px;">
                        @if (Model.TestLevels != null && Model.TestLevels.Any())
                        {
                            <div style="margin:8px 0;">
                                @* <label for="testLevelSelect">テストレベル</label> *@
                                <select id="testLevelSelect" asp-for="SelectedTestLevelId" style="display:block; width:100%; padding:8px; margin-top:6px;">
                                    <option value="">選択してください</option>
                                    @foreach (var level in Model.TestLevels)
                                    {
                                        <option value="@level.Id">
                                            @level.Name @if(!string.IsNullOrWhiteSpace(level.Description)) {
                                                <text>- @level.Description</text>
                                            }
                                        </option>
                                    }
                                </select>
                            </div>
                        }
                        else
                        {
                            <div style="color:#e74c3c; margin:8px 0;">テストレベルを取得できませんでした。</div>
                        }
                    </div>
                    <div class="block-title">ファイルを選択</div>
                    <div style="margin:8px 0;">
                        @* <label for="fileInput">ファイル</label> *@
                        <input id="fileInput" type="file" asp-for="UploadFiles" multiple style="display:block; margin-top:6px;" />
                    </div>

                    <div style="margin-top:12px;">
                        <input type="submit" class="upload-btn" value="アップロード開始" />
                        <a asp-page="/Dashboard" style="margin-left:10px; text-decoration:none;">キャンセル</a>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
